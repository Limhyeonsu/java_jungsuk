# 16. 네트워킹
## 1. 네트워킹(Networking)
네트워킹의 개념은 컴퓨터들을 서로 연결하여 데티어를 손쉽게 주고받거나 또는 자원 프린터와 같은 주변기기를 함께 공유하고자 하는 노력에서 시작되었다. 초기 네트워크는 단 몇 대의 컴퓨터로 구성되었으나 지금은 전 세계의 셀 수도 없이 많은 수의 컴퓨터가 인터넷이라는 하나의 커다란 네트워크를 구성하고 있고, 인터넷을 통해 방대한 양의 데이터를 공유하는 것이 가능해졌다.

### 1.1 클라이언트/서버 (Client/Server)
서버는 서비스를 제공하는 컴퓨터이고, 클라이언트는 서비스를 사용하는 컴퓨터가 된다. 

서비스는 서버가 클라이언트로부터 요청받은 작업을 처리하여 그 결과를 제공하는 것을 뜻하고, 서버가 제공하는 서비스의 종류에 따라 파일서버, 메일서버, 어플리케이션 서버 등이 있다.

서버가 서비스를 제공하기 위해서는 서버 프로그램이 있어야 하고 클라이언트가 서비스를 제공받기 위해서는 서버 프로그램과 연결할 수 있는 클라이언트 프로그램이 있어야 한다.(예. 웹서버와 웹 브라우저, FTP 서버와 FPT 클라이언트 프로그램) 

네트워크를 구성할 때 전용서버를 두는 것을 서버기반 모델이라 하고, 별도의 전용서버 없이 각 클라이언트가 서버역할을 동시에 수행하는 것을 P2P모델이라 한다.

| 서버 기반 모델              | P2P 모델                 |
|-----------------------|------------------------|
| 안정적인 서비스의 제공이 가능하다.   | 서버구축 및 운용비용을 절감할 수 있다. |
| 공유 데이터의 관리와 보안이 용이하다. | 자원의 활용을 극대화할 수 있다.     |
| 서버 구축 비용과 관리 비용이 든다.  | 자원의 관리가 어렵고, 보안이 취약하다. |

### 1.2 IP주소
IP 주소는 컴퓨터를 구별하는데 사용되는 고유한 값으로 인터넷에 견결된 모든 컴퓨터는 IP 주소를 갖는다. IP 주소는 4byte의 정수로 구성되어 있고 4개의 정수가 마침표를 구분자로 표현된다. (0~255사이의 정수)

<img src="/2회독/img/IP주소.jpeg" width="700px">

IP주소와 서브넷 마스크(IP 주소에서 네트워크 영역을 부분적으로 나눈 부분망, 부분 네트워크를 뜻)를 비트연산자 &로 연산하면 네트워크 주소만을 뽑아낼 수 있다.

### 1.3 InetAddress
자바에서 IP 주소를 다루기 위한 클래스로 InetAddress를 제공한다.

```java
InetAddress ip = null;
InetAddress[] ipArr = null;

try {
    ip = InetAddress.getByName("www.naver.com");  //도메인 명을 통해 ip 주소를 얻는다.
    ip.getHostName();  //호스트 이름
    ip.getHostAddress();  //호스트의 ip 주소
    
    byte[] ipAddr = ip.getAddress();  //ip주소를 byte 배열로 반환
    String result = "";
    
    for(int i=0; i <ip.ipAddr.length; i++) {
        result += *ipAddr[i] < 0) ? ipAddr[i] + 256 : ipAddr[i];    //음수 방지를 위해 +256
        result += ".";
    }
    
} catch(UnknownHostException e) {...}

```

### 1.4 URL(Uniform Resoutce Locator)
URL은 인터넷에 존재하는 여러 서버들이 제공하는 자원에 접근할 수 있는 주소를 표현하기 위한 것으로 `프로토콜://호스트명:포트번호/경로명/파일명?쿼리스트링#참조`의 형태로 이루어져 있다.

```
프로토콜 : 자원에 접근하기 위해 서버와 통신하는데 사용되는 통신규약(http)
호스트명 : 자원을 제공하는 서버의 이름
포트번호 : 통신에 사용되는 서버의 포트번호
경로명 : 접근하려는 자원이 저장된 서버상의 위치
파일명 : 접근하려는 자원의 이름
쿼리 : URL에서 ? 이후의 부분
참조 : URL에서 # 이후의 부분
```

```java
URL url = new URL("http://www.codechobo.com:80/sample/hello.html?referer=codechobo#index1");

url.getAuthority();     //호스트명, 포트  
url.getContent();       //content 객체 반환
url.getDefaultPort();   //기본포트
url.getPort();          //포트
url.getFile();          //파일명
url.getHost();          //호스트명
url.getPath();          //경로명
url.getProtocol();      //프로토콜
url.getQuery();         //쿼리
url.getRef();           //참조
url.getUserInfo();      //사용자 정보
url.toExternalForm();   //URL -> 문자열
url.toUrl();            //URL -> URL
```

### 1.5 URLConnection
어플리케이션과 URL간의 통신연결을 나타내는 클래스의 최상위 클래스로 추상클래스이다. 구현 클래스로는 HttpURLConnection과 JarURLConnection이 있다. URLConnection을 이용해서 연결하고자 하는 자원에 접근하고 읽고 쓰기를 할 수 있다.

```java
URL url = null;
String address = "http://www.codechobo.com:80/sample/hello.html";

try {
    url = new URL(address);
    URLConnection conn = url.openConnnection();
    conn.getAllowUserInteraction();  //UserInteraction의 허용여부
    conn.getConnectTimeout();        //연결종료시간
    conn.getContent();               //content 객체 반환
    conn.getContentEncoding();
    
    //...
    
}catch(Exception e) {...}
```
